import { useState, useEffect } from "react";
import { Container, Row, Col } from "react-bootstrap";
import headerImg from "../assets/img/header-img.png";
import { ArrowRightCircle } from 'react-bootstrap-icons';
// import 'animate.css';
import TrackVisibility from 'react-on-screen';
import logo from '../assets/img/logo.png'
export const Banner = () => {
  const [loopNum, setLoopNum] = useState(0);
  const [isDeleting, setIsDeleting] = useState(false);
  const [text, setText] = useState('');
  const [delta, setDelta] = useState(300 - Math.random() * 100);
  const [index, setIndex] = useState(1);
  const toRotate = [ "Do they get a good platform?", "How to grow your business?", "What can be done to upscale their business?" ];
  const period = 2000;

  useEffect(() => {
    let ticker = setInterval(() => {
      tick();
    }, delta);
  return () => { clearInterval(ticker) };
  }, [text])

  const tick = () => {
    let i = loopNum % toRotate.length;
    
    let fullText = toRotate[i];

    let updatedText = isDeleting ? fullText.substring(0, text.length - 1) : fullText.substring(0, text.length + 1);

    setText(updatedText);

    if (isDeleting) {
      setDelta(prevDelta => prevDelta / 2);
    }

    if (!isDeleting && updatedText === fullText) {
      setIsDeleting(true);
      setIndex(prevIndex => prevIndex - 1);
      setDelta(period);
    } 
    
    else if (isDeleting && updatedText === '') {
      setIsDeleting(false);
      setLoopNum(loopNum + 1);
      setIndex(1);
      setDelta(500);
    } 
    
    else {
      setIndex(prevIndex => prevIndex + 1);
    }
  }
  return (
    <section className="banner" id="home">
      <Container>
        <Row className="aligh-items-center">
          <Col xs={12} md={6} xl={7}>
            <TrackVisibility>
              {({ isVisible }) =>
              <div className={isVisible ? "animate__animated animate__fadeIn" : ""}>
                <span className="tagline">Welcome to Udyogini - </span>
                <h1>{`Women Entrepreneurs in rural area?`} <span className="txt-rotate" dataPeriod="1000" data-rotate='[ "Do they get a good platform?", "How to grow your business?", "What can be done to upscale their business?" ]'><span className="wrap">{text}</span></span></h1>
                  <p>Women entrepreneurship has been recognized as an important source of economic growth. Women entrepreneurs create new jobs for themselves and others and also provide society with different solutions to management, organization and business problems. However, they still represent a minority of all entrepreneurs.  </p>
                  <p>Women entrepreneurs often face gender-based barriers to starting and growing their businesses, like discriminatory property, matrimonial and inheritance laws and/or cultural practices; lack of access to formal finance mechanisms; limited mobility and access to information and networks, etc. Women’s entrepreneurship can make a particularly strong contribution to the economic well-being of the family and communities, poverty reduction and women’s empowerment, thus contributing to the Millennium development goals. Thus, governments across the world as well as various developmental organizations are actively undertaking promotion of women entrepreneurs through various schemes, incentives.</p>
                  <button onClick={() => console.log('connect')} to="#contact">Let’s Connect <ArrowRightCircle size={25} /></button>
              </div>}
            </TrackVisibility>
            
          </Col>
          <Col xs={12} md={6} xl={5}>
            <TrackVisibility>
              {({ isVisible }) =>
                <div className={isVisible ? "animate__animated animate__zoomIn" : ""}>
                  <img src={logo} alt="Header Img"/>
                </div>}
            </TrackVisibility>
          </Col>
        </Row>
      </Container>
    </section>
  )
}